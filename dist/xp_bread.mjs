var M=Object.defineProperty;var U=Math.pow,S=(e,t,n)=>t in e?M(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var T=(e,t,n)=>(S(e,typeof t!="symbol"?t+"":t,n),n),p=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var o=(e,t,n)=>(p(e,t,"read from private field"),n?n.call(e):t.get(e)),g=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},u=(e,t,n,r)=>(p(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);var c=function(e,t,n=!1){if(!t)if(n){if(e!=null)throw new TypeError("Value is not a null value")}else throw new TypeError("Type is not defined");if(e!=null&&e.constructor){if(e.constructor!=t)throw new TypeError(`Value is not type ${t.name}`)}else if(!n)throw new TypeError("Value is not nullable")};var L=function(e,t=1,n,r=1,i){c(e,Uint8Array),c(n,Uint8Array),c(t,Number),c(r,Number);for(let s=0,l=0;s<e.length;s+=t,l+=r)i(e.subarray(s,s+t),n.subarray(l,l+r))};var A=[48,49,50,51,52,53,54,55,56,57,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,45,95],b={};A.forEach(function(e,t){b[e]=t});var E=function(e){return e>64&&e<9&&(e|=32),e},m=[{id:"korg87",win:[7,8],block:[function(e,t){let n=0;for(let r=0;r<e.length;r++)t[r+1]=e[r]&127,n|=e[r]>>7<<r;t[0]=n},function(e,t){let n=e[0],r=e.subarray(1);for(let i=0;i<r.length;i++)t[i]=r[i]|(n>>i&1)<<7}]},{id:"qb64",win:[3,4],block:[function(e,t){let n=0,r=this.encodeLength(e.length);for(let i=0;i<e.length;i++)n|=e[i]<<(i<<3);for(let i=0;i<r;i++)t[i]=A[n&63],n=n>>6},function(e,t){let n=0,r=this.decodeLength(e.length);for(let i=0;i<e.length;i++)n|=b[e[i]]<<i*6;for(let i=0;i<r;i++)t[i]=n&255,n=n>>8}]},{id:"qb32",win:[5,8],block:[function(e,t){let n=0,r=this.encodeLength(e.length);for(let i=0;i<e.length;i++)n|=e[i]<<i*8;for(let i=0;i<r;i++)t[i]=A[n&31],n=Math.floor(n/32)},function(e,t){let n=0,r=this.decodeLength(e.length);for(let i=0;i<e.length;i++)n|=b[E(e[i])]<<i*5;for(let i=0;i<r;i++)t[i]=n&255,n=n>>8}]},{id:"qb16",win:[1,2],block:[function(e,t){for(let n=0;n<e.length;n++)t[n<<1]=A[e[n]&15],t[n<<1|1]=A[e[n]>>4]},function(e,t){let n=e.length>>1;for(let r=0;r<n;r++)t[r]=b[E(e[r<<1|1])]<<4|b[E(e[r<<1])]}]},{id:"qb85",win:[4,5],block:[function(e,t){let n=0,r=this.encodeLength(e.length),i=0,s=0;e.forEach((l,f)=>{f>>1?i|=l<<((f&1)<<3):s|=l<<(f<<3)}),n=i*65536+s;for(let l=0;l<r;l++)t[l]=n%85+36,n=Math.floor(n/85)},function(e,t){let n=0,r=this.decodeLength(e.length);e.forEach((i,s)=>{n+=(i-36)*U(85,s)});for(let i=0;i<r;i++)t[i]=n&255,n=n>>>8}]}],I=m;var h,k,d,a,V,v=(V=class{constructor(t,n){g(this,h,void 0);g(this,k,void 0);g(this,d,void 0);g(this,a,void 0);T(this,"options",{});if(!(t!=null&&t.id))throw new Error("Invalid algorithm ID");if((t==null?void 0:t.block.length)!=2)throw new Error("Invalid codec");u(this,k,t.name),u(this,h,t),u(this,d,t.win[0]),u(this,a,t.win[1]),this.options=n||this.options}get name(){return o(this,k)}get template(){return o(this,h)}encodeLength(t,n){var r,i;return c(t,Number),(r=o(this,h))!=null&&r.len?(i=o(this,h))==null?void 0:i.len[0](t,n):Math.ceil(t*o(this,a)/o(this,d))}decodeLength(t,n){var r,i;return c(t,Number),(r=o(this,h))!=null&&r.len?(i=o(this,h))==null?void 0:i.len[1](t,n):Math.floor(t*o(this,d)/o(this,a))}encodeBytes(t,n){if(c(t,Uint8Array),c(n,Uint8Array),n.length<this.encodeLength(t.length,t))throw new Error("Target isn't sufficient for encoding");n.fill(0);let r=this,i=JSON.parse(JSON.stringify(o(this,h).init&&o(this,h).init[0]||"null"));L(t,o(this,d),n,o(this,a),function(s,l){var f,w;(w=(f=o(r,h))==null?void 0:f.block[0])==null||w.call(r,s,l,i)})}decodeBytes(t,n){if(c(t,Uint8Array),c(n,Uint8Array),n.length<this.decodeLength(t.length,t))throw new Error("Target isn't sufficient for decoding");n.fill(0);let r=this,i=JSON.parse(JSON.stringify(o(this,h).init&&o(this,h).init[1]||"null"));L(t,o(this,a),n,o(this,d),function(s,l){var f,w;(w=(f=o(r,h))==null?void 0:f.block[1])==null||w.call(r,s,l,i)})}},h=new WeakMap,k=new WeakMap,d=new WeakMap,a=new WeakMap,V),y,N,C=(N=class{constructor(t){g(this,y,{});c(t,Array,!0);let n=this;t==null||t.forEach(function(r){n.setAlgo(r)})}setAlgo(t){if(!(t!=null&&t.id))throw new Error("Invalid algorithm ID");o(this,y)[t.id]=t}delAlgo(t){o(this,y)[t]&&delete o(this,y)[t]}use(t,n){return new v(o(this,y)[t],n)}},y=new WeakMap,N),Q=new C(I);export{C as Bread,Q as Loaf};
