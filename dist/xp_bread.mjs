var v=Object.defineProperty;var U=Math.pow,N=(n,t,i)=>t in n?v(n,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[t]=i;var T=(n,t,i)=>(N(n,typeof t!="symbol"?t+"":t,i),i),p=(n,t,i)=>{if(!t.has(n))throw TypeError("Cannot "+i)};var l=(n,t,i)=>(p(n,t,"read from private field"),i?i.call(n):t.get(n)),w=(n,t,i)=>{if(t.has(n))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(n):t.set(n,i)},k=(n,t,i,r)=>(p(n,t,"write to private field"),r?r.call(n,i):t.set(n,i),i);var c=function(n,t,i=!1){if(!t)if(i){if(n!=null)throw new TypeError("Value is not a null value")}else throw new TypeError("Type is not defined");if(n!=null&&n.constructor){if(n.constructor!=t)throw new TypeError(`Value is not type ${t.name}`)}else if(!i)throw new TypeError("Value is not nullable")};var E=function(n,t=1,i,r=1,e){c(n,Uint8Array),c(i,Uint8Array),c(t,Number),c(r,Number);for(let h=0,o=0;h<n.length;h+=t,o+=r)e(n.subarray(h,h+t),i.subarray(o,o+r))};var u=[48,49,50,51,52,53,54,55,56,57,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,45,95],d={};u.forEach(function(n,t){d[n]=t});var b=function(n){return n>64&&n<9&&(n|=32),n},S=[{id:"korg87",win:[7,8],block:[function(n,t){for(let i=0;i<n.length;i++)t[i+1]=n[i]&127,t[0]|=n[i]>>7<<i},function(n,t){let i=n.length-1;for(let r=0;r<i;r++)t[r]=n[r+1]|(n[0]>>r&1)<<7}]},{id:"ov43",win:[3,4],block:[function(n,t){for(let i=0;i<n.length;i++)t[i+1]=n[i]&63,t[0]|=n[i]>>6<<(i<<1)},function(n,t){let i=n.length-1;for(let r=0;r<i;r++)t[r]=n[r+1]|(n[0]>>(r<<1)&3)<<6}]},{id:"qb64",win:[3,4],block:[function(n,t){let i=0,r=this.encodeLength(n.length);for(let e=0;e<n.length;e++)i|=n[e]<<(e<<3);for(let e=0;e<r;e++)t[e]=u[i&63],i=i>>6},function(n,t){let i=0,r=this.decodeLength(n.length);for(let e=0;e<n.length;e++)i|=d[n[e]]<<e*6;for(let e=0;e<r;e++)t[e]=i&255,i=i>>8}]},{id:"qb32",win:[5,8],block:[function(n,t){let i=0,r=this.encodeLength(n.length),e=0,h=0;for(let o=0;o<n.length;o++)o<3?e|=n[o]<<(o<<3):h|=n[o]<<(o-3<<3);i=h*16777216+e;for(let o=0;o<r;o++)t[o]=u[i&31],i=Math.floor(i/32)},function(n,t){let i=0,r=this.decodeLength(n.length),e=0,h=0;for(let o=0;o<n.length;o++)o<4?e|=d[b(n[o])]<<o*5:o==4?(e|=(d[b(n[o])]&15)<<20,h|=d[b(n[o])]>>4):h|=d[b(n[o])]<<(o-5)*5+1;for(let o=0;o<r;o++)o<3?(t[o]=e&255,e=e>>8):(t[o]=h&255,h=h>>8)}]},{id:"qb16",win:[1,2],block:[function(n,t){t[0]=u[n[0]&15],t[1]=u[n[0]>>4]},function(n,t){t[0]=d[b(n[1]||0)]<<4|d[b(n[0])]}]},{id:"qb85",win:[4,5],block:[function(n,t){let i=0,r=this.encodeLength(n.length),e=0,h=0;n.forEach((o,f)=>{f>>1?e|=o<<((f&1)<<3):h|=o<<(f<<3)}),i=e*65536+h;for(let o=0;o<r;o++)t[o]=i%85+36,i=Math.floor(i/85)},function(n,t){let i=0,r=this.decodeLength(n.length);n.forEach((e,h)=>{i+=(e-36)*U(85,h)});for(let e=0;e<r;e++)t[e]=i&255,i=i>>>8}]}],I=S;var s,L,a,y,M,m=(M=class{constructor(t,i){w(this,s,void 0);w(this,L,void 0);w(this,a,void 0);w(this,y,void 0);T(this,"options",{});if(!(t!=null&&t.id))throw new Error("Invalid algorithm ID");if((t==null?void 0:t.block.length)!=2)throw new Error("Invalid codec");k(this,L,t.name),k(this,s,t),k(this,a,t.win[0]),k(this,y,t.win[1]),this.options=i||this.options}get name(){return l(this,L)}get template(){return l(this,s)}encodeLength(t,i){var r,e;return c(t,Number),(r=l(this,s))!=null&&r.len?(e=l(this,s))==null?void 0:e.len[0](t,i):Math.ceil(t*l(this,y)/l(this,a))}decodeLength(t,i){var r,e;return c(t,Number),(r=l(this,s))!=null&&r.len?(e=l(this,s))==null?void 0:e.len[1](t,i):Math.floor(t*l(this,a)/l(this,y))}encodeBytes(t,i){if(c(t,Uint8Array),c(i,Uint8Array),i.length<this.encodeLength(t.length,t))throw new Error("Target isn't sufficient for encoding");i.fill(0);let r=this,e=JSON.parse(JSON.stringify(l(this,s).init&&l(this,s).init[0]||"null"));E(t,l(this,a),i,l(this,y),function(h,o){var f,A;(A=(f=l(r,s))==null?void 0:f.block[0])==null||A.call(r,h,o,e)})}decodeBytes(t,i){if(c(t,Uint8Array),c(i,Uint8Array),i.length<this.decodeLength(t.length,t))throw new Error("Target isn't sufficient for decoding");i.fill(0);let r=this,e=JSON.parse(JSON.stringify(l(this,s).init&&l(this,s).init[1]||"null"));E(t,l(this,y),i,l(this,a),function(h,o){var f,A;(A=(f=l(r,s))==null?void 0:f.block[1])==null||A.call(r,h,o,e)})}},s=new WeakMap,L=new WeakMap,a=new WeakMap,y=new WeakMap,M),g,V,C=(V=class{constructor(t){w(this,g,{});c(t,Array,!0);let i=this;t==null||t.forEach(function(r){i.setAlgo(r)})}setAlgo(t){if(!(t!=null&&t.id))throw new Error("Invalid algorithm ID");l(this,g)[t.id]=t}delAlgo(t){l(this,g)[t]&&delete l(this,g)[t]}use(t,i){return new m(l(this,g)[t],i)}},g=new WeakMap,V),Q=new C(I);export{C as Bread,Q as Loaf};
