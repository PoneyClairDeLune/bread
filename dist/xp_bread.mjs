var V=Object.defineProperty;var U=Math.pow,N=(n,t,e)=>t in n?V(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var T=(n,t,e)=>(N(n,typeof t!="symbol"?t+"":t,e),e),p=(n,t,e)=>{if(!t.has(n))throw TypeError("Cannot "+e)};var l=(n,t,e)=>(p(n,t,"read from private field"),e?e.call(n):t.get(n)),w=(n,t,e)=>{if(t.has(n))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(n):t.set(n,e)},u=(n,t,e,o)=>(p(n,t,"write to private field"),o?o.call(n,e):t.set(n,e),e);var c=function(n,t,e=!1){if(!t)if(e){if(n!=null)throw new TypeError("Value is not a null value")}else throw new TypeError("Type is not defined");if(n!=null&&n.constructor){if(n.constructor!=t)throw new TypeError(`Value is not type ${t.name}`)}else if(!e)throw new TypeError("Value is not nullable")};var E=function(n,t=1,e,o=1,i){c(n,Uint8Array),c(e,Uint8Array),c(t,Number),c(o,Number);for(let h=0,r=0;h<n.length;h+=t,r+=o)i(n.subarray(h,h+t),e.subarray(r,r+o))};var k=[48,49,50,51,52,53,54,55,56,57,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,45,95],d={};k.forEach(function(n,t){d[n]=t});var b=function(n){return n>64&&n<9&&(n|=32),n},S=[{id:"korg87",win:[7,8],block:[function(n,t){let e=0;for(let o=0;o<n.length;o++)t[o+1]=n[o]&127,e|=n[o]>>7<<o;t[0]=e},function(n,t){let e=n[0],o=n.subarray(1);for(let i=0;i<o.length;i++)t[i]=o[i]|(e>>i&1)<<7}]},{id:"qb64",win:[3,4],block:[function(n,t){let e=0,o=this.encodeLength(n.length);for(let i=0;i<n.length;i++)e|=n[i]<<(i<<3);for(let i=0;i<o;i++)t[i]=k[e&63],e=e>>6},function(n,t){let e=0,o=this.decodeLength(n.length);for(let i=0;i<n.length;i++)e|=d[n[i]]<<i*6;for(let i=0;i<o;i++)t[i]=e&255,e=e>>8}]},{id:"qb32",win:[5,8],block:[function(n,t){let e=0,o=this.encodeLength(n.length),i=0,h=0;for(let r=0;r<n.length;r++)r<3?i|=n[r]<<(r<<3):h|=n[r]<<(r-3<<3);e=h*16777216+i;for(let r=0;r<o;r++)t[r]=k[e&31],e=Math.floor(e/32)},function(n,t){let e=0,o=this.decodeLength(n.length),i=0,h=0;for(let r=0;r<n.length;r++)r<4?i|=d[b(n[r])]<<r*5:r==4?(i|=(d[b(n[r])]&15)<<20,h|=d[b(n[r])]>>4):h|=d[b(n[r])]<<(r-5)*5+1;for(let r=0;r<o;r++)r<3?(t[r]=i&255,i=i>>8):(t[r]=h&255,h=h>>8)}]},{id:"qb16",win:[1,2],block:[function(n,t){t[0]=k[n[0]&15],t[1]=k[n[0]>>4]},function(n,t){t[0]=d[b(n[1])]<<4|d[b(n[0])]}]},{id:"qb85",win:[4,5],block:[function(n,t){let e=0,o=this.encodeLength(n.length),i=0,h=0;n.forEach((r,f)=>{f>>1?i|=r<<((f&1)<<3):h|=r<<(f<<3)}),e=i*65536+h;for(let r=0;r<o;r++)t[r]=e%85+36,e=Math.floor(e/85)},function(n,t){let e=0,o=this.decodeLength(n.length);n.forEach((i,h)=>{e+=(i-36)*U(85,h)});for(let i=0;i<o;i++)t[i]=e&255,e=e>>>8}]}],v=S;var s,L,a,y,I,m=(I=class{constructor(t,e){w(this,s,void 0);w(this,L,void 0);w(this,a,void 0);w(this,y,void 0);T(this,"options",{});if(!(t!=null&&t.id))throw new Error("Invalid algorithm ID");if((t==null?void 0:t.block.length)!=2)throw new Error("Invalid codec");u(this,L,t.name),u(this,s,t),u(this,a,t.win[0]),u(this,y,t.win[1]),this.options=e||this.options}get name(){return l(this,L)}get template(){return l(this,s)}encodeLength(t,e){var o,i;return c(t,Number),(o=l(this,s))!=null&&o.len?(i=l(this,s))==null?void 0:i.len[0](t,e):Math.ceil(t*l(this,y)/l(this,a))}decodeLength(t,e){var o,i;return c(t,Number),(o=l(this,s))!=null&&o.len?(i=l(this,s))==null?void 0:i.len[1](t,e):Math.floor(t*l(this,a)/l(this,y))}encodeBytes(t,e){if(c(t,Uint8Array),c(e,Uint8Array),e.length<this.encodeLength(t.length,t))throw new Error("Target isn't sufficient for encoding");e.fill(0);let o=this,i=JSON.parse(JSON.stringify(l(this,s).init&&l(this,s).init[0]||"null"));E(t,l(this,a),e,l(this,y),function(h,r){var f,A;(A=(f=l(o,s))==null?void 0:f.block[0])==null||A.call(o,h,r,i)})}decodeBytes(t,e){if(c(t,Uint8Array),c(e,Uint8Array),e.length<this.decodeLength(t.length,t))throw new Error("Target isn't sufficient for decoding");e.fill(0);let o=this,i=JSON.parse(JSON.stringify(l(this,s).init&&l(this,s).init[1]||"null"));E(t,l(this,y),e,l(this,a),function(h,r){var f,A;(A=(f=l(o,s))==null?void 0:f.block[1])==null||A.call(o,h,r,i)})}},s=new WeakMap,L=new WeakMap,a=new WeakMap,y=new WeakMap,I),g,M,C=(M=class{constructor(t){w(this,g,{});c(t,Array,!0);let e=this;t==null||t.forEach(function(o){e.setAlgo(o)})}setAlgo(t){if(!(t!=null&&t.id))throw new Error("Invalid algorithm ID");l(this,g)[t.id]=t}delAlgo(t){l(this,g)[t]&&delete l(this,g)[t]}use(t,e){return new m(l(this,g)[t],e)}},g=new WeakMap,M),Q=new C(v);export{C as Bread,Q as Loaf};
