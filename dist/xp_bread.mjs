var V=Object.defineProperty;var U=Math.pow,N=(e,t,n)=>t in e?V(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var T=(e,t,n)=>(N(e,typeof t!="symbol"?t+"":t,n),n),p=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var l=(e,t,n)=>(p(e,t,"read from private field"),n?n.call(e):t.get(e)),w=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},u=(e,t,n,r)=>(p(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);var c=function(e,t,n=!1){if(!t)if(n){if(e!=null)throw new TypeError("Value is not a null value")}else throw new TypeError("Type is not defined");if(e!=null&&e.constructor){if(e.constructor!=t)throw new TypeError(`Value is not type ${t.name}`)}else if(!n)throw new TypeError("Value is not nullable")};var E=function(e,t=1,n,r=1,i){c(e,Uint8Array),c(n,Uint8Array),c(t,Number),c(r,Number);for(let h=0,o=0;h<e.length;h+=t,o+=r)i(e.subarray(h,h+t),n.subarray(o,o+r))};var k=[48,49,50,51,52,53,54,55,56,57,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,45,95],d={};k.forEach(function(e,t){d[e]=t});var b=function(e){return e>64&&e<9&&(e|=32),e},S=[{id:"korg87",win:[7,8],block:[function(e,t){let n=0;for(let r=0;r<e.length;r++)t[r+1]=e[r]&127,n|=e[r]>>7<<r;t[0]=n},function(e,t){let n=e[0],r=e.subarray(1);for(let i=0;i<r.length;i++)t[i]=r[i]|(n>>i&1)<<7}]},{id:"qb64",win:[3,4],block:[function(e,t){let n=0,r=this.encodeLength(e.length);for(let i=0;i<e.length;i++)n|=e[i]<<(i<<3);for(let i=0;i<r;i++)t[i]=k[n&63],n=n>>6},function(e,t){let n=0,r=this.decodeLength(e.length);for(let i=0;i<e.length;i++)n|=d[e[i]]<<i*6;for(let i=0;i<r;i++)t[i]=n&255,n=n>>8}]},{id:"qb32",win:[5,8],block:[function(e,t){let n=0,r=this.encodeLength(e.length),i=0,h=0;for(let o=0;o<e.length;o++)o<3?i|=e[o]<<(o<<3):h|=e[o]<<(o-3<<3);n=h*16777216+i;for(let o=0;o<r;o++)t[o]=k[n&31],n=Math.floor(n/32)},function(e,t){let n=0,r=this.decodeLength(e.length),i=0,h=0;for(let o=0;o<e.length;o++)o<4?i|=d[b(e[o])]<<o*5:o==4?(i|=(d[b(e[o])]&15)<<20,h|=d[b(e[o])]>>4):h|=d[b(e[o])]<<(o-5)*5+1;for(let o=0;o<r;o++)o<3?(t[o]=i&255,i=i>>8):(t[o]=h&255,h=h>>8)}]},{id:"qb16",win:[1,2],block:[function(e,t){for(let n=0;n<e.length;n++)t[n<<1]=k[e[n]&15],t[n<<1|1]=k[e[n]>>4]},function(e,t){let n=e.length>>1;for(let r=0;r<n;r++)t[r]=d[b(e[r<<1|1])]<<4|d[b(e[r<<1])]}]},{id:"qb85",win:[4,5],block:[function(e,t){let n=0,r=this.encodeLength(e.length),i=0,h=0;e.forEach((o,f)=>{f>>1?i|=o<<((f&1)<<3):h|=o<<(f<<3)}),n=i*65536+h;for(let o=0;o<r;o++)t[o]=n%85+36,n=Math.floor(n/85)},function(e,t){let n=0,r=this.decodeLength(e.length);e.forEach((i,h)=>{n+=(i-36)*U(85,h)});for(let i=0;i<r;i++)t[i]=n&255,n=n>>>8}]}],v=S;var s,L,a,y,I,m=(I=class{constructor(t,n){w(this,s,void 0);w(this,L,void 0);w(this,a,void 0);w(this,y,void 0);T(this,"options",{});if(!(t!=null&&t.id))throw new Error("Invalid algorithm ID");if((t==null?void 0:t.block.length)!=2)throw new Error("Invalid codec");u(this,L,t.name),u(this,s,t),u(this,a,t.win[0]),u(this,y,t.win[1]),this.options=n||this.options}get name(){return l(this,L)}get template(){return l(this,s)}encodeLength(t,n){var r,i;return c(t,Number),(r=l(this,s))!=null&&r.len?(i=l(this,s))==null?void 0:i.len[0](t,n):Math.ceil(t*l(this,y)/l(this,a))}decodeLength(t,n){var r,i;return c(t,Number),(r=l(this,s))!=null&&r.len?(i=l(this,s))==null?void 0:i.len[1](t,n):Math.floor(t*l(this,a)/l(this,y))}encodeBytes(t,n){if(c(t,Uint8Array),c(n,Uint8Array),n.length<this.encodeLength(t.length,t))throw new Error("Target isn't sufficient for encoding");n.fill(0);let r=this,i=JSON.parse(JSON.stringify(l(this,s).init&&l(this,s).init[0]||"null"));E(t,l(this,a),n,l(this,y),function(h,o){var f,A;(A=(f=l(r,s))==null?void 0:f.block[0])==null||A.call(r,h,o,i)})}decodeBytes(t,n){if(c(t,Uint8Array),c(n,Uint8Array),n.length<this.decodeLength(t.length,t))throw new Error("Target isn't sufficient for decoding");n.fill(0);let r=this,i=JSON.parse(JSON.stringify(l(this,s).init&&l(this,s).init[1]||"null"));E(t,l(this,y),n,l(this,a),function(h,o){var f,A;(A=(f=l(r,s))==null?void 0:f.block[1])==null||A.call(r,h,o,i)})}},s=new WeakMap,L=new WeakMap,a=new WeakMap,y=new WeakMap,I),g,M,C=(M=class{constructor(t){w(this,g,{});c(t,Array,!0);let n=this;t==null||t.forEach(function(r){n.setAlgo(r)})}setAlgo(t){if(!(t!=null&&t.id))throw new Error("Invalid algorithm ID");l(this,g)[t.id]=t}delAlgo(t){l(this,g)[t]&&delete l(this,g)[t]}use(t,n){return new m(l(this,g)[t],n)}},g=new WeakMap,M),Q=new C(v);export{C as Bread,Q as Loaf};
